Azure Document Repository
Design and architecture for a file management system built on Azure services. This repo contains diagrams, requirements, and backlog issues to showcase a cloud-native document repository migration from legacy systems.
________________________________________
🌐 Overview
•	File types: PDF, Word (.docx)
•	Max size: 1 MB per file
•	Features: Upload, download, preview (in-app), edit metadata, search, category tree navigation
•	Search: Wildcard on filename & tags; category/subcategory browsing
•	IAM Roles:
o	Admin → full access
o	Editor → limited to own files (upload, re-upload, metadata edit, delete/restore, lock/unlock)
o	User → view + search only
•	Platform: Azure Blob Storage + SQL Database + App Service + Functions + Key Vault
•	Soft delete: 30 days retention with restore option
•	Notifications: Email alerts 10 days before purge + purge list page
________________________________________
🏗 Architecture Diagram
flowchart TB
  subgraph Client
    UI[Web App (static/front-end)]
  end

  subgraph Azure
    APIM[API Management]
    BE[Backend API (App Service)]
    SQL[(Azure SQL DB\nMetadata + Audit + IAM + Category Master)]
    KV[Key Vault]

    subgraph Storage
      SA[(Storage Account)]
      Blob[Blob Container: /files]
      Logs[Blob Container: /audit-exports]
    end

    MSI[(Managed Identity)]
    Def[Defender for Storage\nMalware scanning]
    Fn[Azure Functions\n- Nightly lifecycle + notifications\n- On‑upload orchestration]
    LA[Logic App (email notifications)]
  end

  UI -->|Auth (Entra ID)| APIM --> BE
  BE -->|Read/Write| SQL
  BE -->|SAS / SDK| Blob
  BE --> KV
  Def --> SA
  Fn --> Blob
  Fn --> SQL
  Fn --> LA
  UI -->|Queries| APIM --> BE -->|Search| SQL
________________________________________
📌 Backlog Highlights
feat(storage): soft delete (30d), lifecycle Hot→Cool→Cold
feat(ui): category tree + counts
feat(ui): PDF preview; DOCX→PDF preview
feat(ui): purge list page (soft-deleted files)
feat(job): nightly purge-warning email (10d)
feat(security): Defender for Storage malware scanning
________________________________________
📁 Repo Structure
/README.md          ← Overview (this file)
/docs               ← Documentation & diagrams
/docs/diagrams      ← PNG/SVG exports of Mermaid diagrams
/backend            ← Placeholder for API code (future)
/infra              ← Infra-as-code (Bicep/ARM templates)
________________________________________
👉 See the Full Design Document for detailed architecture, data model, workflows, and IAM rules.
